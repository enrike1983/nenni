SSH_USER=nennii5
SSH_HOST=ecbiz173.inmotionhosting.com
WEB_DIR=/home/nennii5/public_html
HTTP_USER=www-data
UPLOADS=web/uploads
CACHE=var/cache
LOGS=var/logs

compileassets:
	cd app/Resources && yarn install && gulp build

rsync:
	rsync -e "ssh -p 2222" -az --no-perms --delete -i --omit-dir-times . ${SSH_USER}@${SSH_HOST}:${WEB_DIR} --exclude-from 'exclude-list.txt'

remote_symfony:
	ssh -p 2222 ${SSH_USER}@${SSH_HOST} "cd ${WEB_DIR} && php bin/console ca:cl --env=prod"

deploy: compileassets rsync remote_symfony
